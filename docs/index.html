<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Sensemaking Tools Documentation - v1.0.0</title><meta name="description" content="Documentation for Sensemaking Tools Documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Sensemaking Tools Documentation - v1.0.0</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>Sensemaking Tools Documentation - v1.0.0</h1></div><div class="tsd-panel tsd-typography"><a id="md:sensemaking-tools" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Sensemaking tools<a href="#md:sensemaking-tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overview<a href="#md:overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Jigsaw’s <a href="https://medium.com/jigsaw/making-sense-of-large-scale-online-conversations-b153340bda55" target="_blank" class="external">Sensemaking tools</a> help make sense of large-scale online conversations, leveraging LLMs to categorize comments, and summarize comments and voting patterns to surface actionable insights. There are currently three main functions:</p>
<ul>
<li><strong>Topic Learning</strong> - identifies topics and optionally subtopics from a set of comments.</li>
<li><strong>Categorization</strong> - sorts comments into topics defined by a user or from the Topic Learning function. Comments can belong to more than one topic.</li>
<li><strong>Summarization</strong> - analyzes comments and optionally vote data to output a summary of the conversation, including areas of agreement and areas of disagreement.
<ul>
<li>Voting patterns can be passed in, aggregated either by opinion group or broken down by metadata about participants (e.g. demographic data)</li>
<li>Summaries are run through grounding routines, ensuring that claims are backed up by what was actually said in the conversation, and adding citations or references to surface representative comments.</li>
</ul>
</li>
</ul>
<p>Please see these <a href="https://jigsaw-code.github.io/sensemaking-tools" target="_blank" class="external">docs</a> for a full breakdown of available methods and types. These tools are still in their beta stage.</p>
<a id="md:llms-used-and-custom-models" class="tsd-anchor"></a><h3 class="tsd-anchor-link">LLMs Used and Custom Models<a href="#md:llms-used-and-custom-models" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>This library is implemented using Google Cloud’s <a href="https://cloud.google.com/vertex-ai" target="_blank" class="external">VertexAI</a>. This means the library can be set up to use any model available on VertexAI’s Google Cloud’s <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/model-garden/explore-models" target="_blank" class="external">Model Garden</a>, including the latest Gemini models, the open source model Gemma, and other models like Llama and Claude (full list <a href="https://cloud.google.com/model-garden" target="_blank" class="external">here</a>). The access and quota requirements are controlled by a user’s Google Cloud account.</p>
<p>In addition to models available through VertexAI’s Model Garden, users can integrate custom models using the library’s <code>Model</code> abstraction. This can be done by implementing a class with only two methods, one for generating plain text and one for generating structured data (<a href="https://jigsaw-code.github.io/sensemaking-tools/classes/models_model.Model.html" target="_blank" class="external">docs</a> for methods). This allows for the library to be used with models not available in the Model Garden, with other cloud providers, and even with on-premise infrastructure for complete data sovereignty.</p>
<a id="md:costs-of-running" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Costs of Running<a href="#md:costs-of-running" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>LLM pricing is based on token count and constantly changing. Here we list the token counts for a conversation with ~1000 comments. Please see <a href="https://cloud.google.com/vertex-ai/generative-ai/pricing" target="_blank" class="external">Vertex AI pricing</a> for an up-to-date cost per input token. As of January 23, 2025 the cost for running topic learning, categorization, and summarization was in total under $1 on Gemini 1.5 Pro.</p>
<p><strong>Token Counts for a 1000 Comment Conversation</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>Topic Learning</th>
<th>Categorization</th>
<th>Summarization</th>
</tr>
</thead>
<tbody>
<tr>
<td>Input Tokens</td>
<td>41,000</td>
<td>41,000</td>
<td>19,000</td>
</tr>
<tr>
<td>Output Tokens</td>
<td>1,000</td>
<td>26,000</td>
<td>5,000</td>
</tr>
</tbody>
</table>
<a id="md:running-the-tools---setup" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Running the tools - Setup<a href="#md:running-the-tools---setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>First make sure you have <code>npm</code> installed (<code>apt-get install npm</code> on Ubuntu-esque systems).</p>
<p>Next install the project modules by running:<br>
<code>npm install</code></p>
<a id="md:using-the-default-models---gcloud-authentication" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Using the Default Models - GCloud Authentication<a href="#md:using-the-default-models---gcloud-authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A Google Cloud project is required to control quota and access when using the default models that connect to Model Garden. Installation instructions for all machines are <a href="https://cloud.google.com/sdk/docs/install-sdk#deb" target="_blank" class="external">here</a>.</p>
<p>For Linux the GCloud CLI can be installed like:<br>
<code>sudo apt install -y google-cloud-cli</code></p>
<p>Then to log in locally run:</p>
<p><code>gcloud config set project &lt;your project name here&gt;</code></p>
<p><code>gcloud auth application-default login</code></p>
<a id="md:example-usage---javascript" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Example Usage - Javascript<a href="#md:example-usage---javascript" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Summarize Seattle’s $15 Minimum Wage Conversation.</p>
<pre><code class="js"><span class="hl-0">// Set up the tools to use the default Vertex model (Gemini Pro 1.5) and related authentication info.</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">mySensemaker</span><span class="hl-2"> = </span><span class="hl-1">new</span><span class="hl-2"> </span><span class="hl-4">Sensemaker</span><span class="hl-2">({</span><br/><span class="hl-2">  </span><span class="hl-5">defaultModel:</span><span class="hl-2"> </span><span class="hl-1">new</span><span class="hl-2"> </span><span class="hl-4">VertexModel</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-6">&quot;myGoogleCloudProject123</span><span class="hl-7">,</span><br/><span class="hl-2">    </span><span class="hl-6">&quot;us-central1&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">  ),</span><br/><span class="hl-2">});</span><br/><br/><span class="hl-0">// Note: this function does not exist.</span><br/><span class="hl-0">// Get data from a discussion in Seattle over a $15 minimum wage.</span><br/><span class="hl-0">// CSV containing comment text, vote counts, and group information from:</span><br/><span class="hl-0">// https://github.com/compdemocracy/openData/tree/master/15-per-hour-seattle</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">comments</span><span class="hl-2">: </span><span class="hl-8">Comments</span><span class="hl-2">[] = </span><span class="hl-4">getCommentsFromCsv</span><span class="hl-2">(</span><span class="hl-6">&quot;./comments.csv&quot;</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// Learn what topics were discussed and print them out.</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">topics</span><span class="hl-2"> = </span><span class="hl-5">mySensemaker</span><span class="hl-2">.</span><span class="hl-4">learnTopics</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">comments</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Should include subtopics:</span><br/><span class="hl-2">  </span><span class="hl-1">true</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// There are no existing topics:</span><br/><span class="hl-2">  </span><span class="hl-1">undefined</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Additional context:</span><br/><span class="hl-2">  </span><span class="hl-6">&quot;This is from a conversation on a $15 minimum wage in Seattle&quot;</span><br/><span class="hl-2">);</span><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-4">log</span><span class="hl-2">(</span><span class="hl-5">topics</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// Summarize the conversation and print the result as Markdown.</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">summary</span><span class="hl-2"> = </span><span class="hl-5">mySensemaker</span><span class="hl-2">.</span><span class="hl-4">summarize</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">comments</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// There&#39;s vote information so vote tally summarization is the best summarization method to use:</span><br/><span class="hl-2">  </span><span class="hl-5">SummarizationType</span><span class="hl-2">.</span><span class="hl-3">VOTE_TALLY</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">topics</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Additional context:</span><br/><span class="hl-2">  </span><span class="hl-6">&quot;This is from a conversation on a $15 minimum wage in Seattle&quot;</span><span class="hl-2"> </span><br/><span class="hl-2">);</span><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-4">log</span><span class="hl-2">(</span><span class="hl-5">summary</span><span class="hl-2">.</span><span class="hl-4">getText</span><span class="hl-2">(</span><span class="hl-6">&quot;MARKDOWN&quot;</span><span class="hl-2">));</span>
</code><button type="button">Copy</button></pre>

<a id="md:cli-usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">CLI Usage<a href="#md:cli-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>There is also a simple CLI set up for testing. There are two tools:</p>
<ul>
<li>./runner-cli/runner.ts: takes in a CSV representing a conversation and outputs an HTML file containing the summary. The summary is best viewed as an HTML file so that the included citations can be hovered over to see the original comment and votes.</li>
<li>./runner-cli/rerunner.ts: takes in a CSV representing a conversation and reruns summarization a number of times and outputs each of the summaries in one CSV. This is useful for testing consistency.</li>
</ul>
<a id="md:running-the-checks" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Running the Checks<a href="#md:running-the-checks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In the ./evals directory there are a number of checks that can be run on an unlabeled conversation. There are three categories of checks:</p>
<ul>
<li>Monitoring Checks: summary generation failure rate and time to run</li>
<li>Quick Checks: whether the summary has an intro and conclusion, and whether all the topics and subtopics from categorization are present</li>
<li>Qualitative Checks: measures how often each group is mentioned</li>
</ul>
<p>All three checks are run using the ./evals/run_checks.ts script.</p>
<a id="md:making-changes-to-the-tools---development" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Making Changes to the tools - Development<a href="#md:making-changes-to-the-tools---development" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:testing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Testing<a href="#md:testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Unit tests can be run with the following command:
<code>npm test</code></p>
<p>To run tests continuously as you make changes run:
<code>npm run test-watch</code></p>
<a id="md:documentation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Documentation<a href="#md:documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The documentation <a href="https://jigsaw-code.github.io/sensemaking-tools" target="_blank" class="external">here</a> is the hosted version of the html from the docs/ subdirectory. This documentation is automatically generated using typedoc, and to update the documentation run:<br>
<code>npx typedoc</code></p>
<a id="md:feedback" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Feedback<a href="#md:feedback" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you have questions or issues with this library please leave feedback <a href="https://docs.google.com/forms/d/e/1FAIpQLSd6kScXaf0d8XR7X9mgHBgG11DJYXV1hEzYLmqpxMcDFJxOhQ/viewform?resourcekey=0-GTVtn872epNsEHtI2ClBEA" target="_blank" class="external">here</a> and we will reach out to you. Our team is actively evaluating Sensemaking performance and is aiming to share our results on this page in the future. Please note that performance results may vary depending on the model selected.</p>
<a id="md:cloud-vertex-terms-of-use" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Cloud Vertex Terms of Use<a href="#md:cloud-vertex-terms-of-use" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This library is designed to leverage Cloud Vertex, and usage is subject to the <a href="https://cloud.google.com/terms/service-terms" target="_blank" class="external">Cloud Vertex Terms of Service</a> and the <a href="https://policies.google.com/terms/generative-ai/use-policy" target="_blank" class="external">Generative AI Prohibited Use Policy</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:sensemaking-tools"><span>Sensemaking tools</span></a><ul><li><a href="#md:overview"><span>Overview</span></a></li><li><ul><li><a href="#md:llms-used-and-custom-models"><span>LLMs <wbr/>Used and <wbr/>Custom <wbr/>Models</span></a></li><li><a href="#md:costs-of-running"><span>Costs of <wbr/>Running</span></a></li></ul></li><li><a href="#md:running-the-tools---setup"><span>Running the tools -<wbr/> <wbr/>Setup</span></a></li><li><ul><li><a href="#md:using-the-default-models---gcloud-authentication"><span>Using the <wbr/>Default <wbr/>Models -<wbr/> GCloud <wbr/>Authentication</span></a></li></ul></li><li><a href="#md:example-usage---javascript"><span>Example <wbr/>Usage -<wbr/> <wbr/>Javascript</span></a></li><li><a href="#md:cli-usage"><span>CLI <wbr/>Usage</span></a></li><li><a href="#md:running-the-checks"><span>Running the <wbr/>Checks</span></a></li><li><a href="#md:making-changes-to-the-tools---development"><span>Making <wbr/>Changes to the tools -<wbr/> <wbr/>Development</span></a></li><li><ul><li><a href="#md:testing"><span>Testing</span></a></li></ul></li><li><a href="#md:documentation"><span>Documentation</span></a></li><li><a href="#md:feedback"><span>Feedback</span></a></li><li><a href="#md:cloud-vertex-terms-of-use"><span>Cloud <wbr/>Vertex <wbr/>Terms of <wbr/>Use</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>Sensemaking Tools Documentation - v1.0.0</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
